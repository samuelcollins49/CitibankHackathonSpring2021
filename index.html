<!doctype html>
<html lang="en">
    <head>
        <script type="text/javascript" src="assets/js/webcam-easy.js"></script>
        <!--Placed elements in html-->
        <video id="webcam" autoplay playsinline width="640" height="480"></video>
        <canvas id="canvas" class="d-none"></canvas>
        <audio id="snapSound" src="audio/snap.wav" preload = "auto"></audio>

        <meta charset="UTF-8">
        <title>Hello There</title>
        <style>
            h2 {text-align: center;}
            p {text-align: center;}
            div {text-align: center;}
            .vertical-center {
                margin: 0;
                position: absolute;
                -ms-transform: translateX(+131%);
                transform: translateX(+131%);
            }
        </style>
    </head>
    
    <body style="background: #FFF;">
                <h2>Check Reader</h2>
                <p>Please input the check using the following tools:</p>
                <div class="vertical-center">
                    <form>
                        <input type="button" value="Scan Check" onclick="takePhoto()">
                    </form>
                        <script>
                        
                        function takePhoto() {
                            
                            const webcamElement = document.getElementById('webcam');
                            const canvasElement = document.getElementById('canvas');
                            const snapSoundElement = document.getElementById('snapSound');
                            
                            alert("Issue is with this line down here");
                            const webcam = new Webcam(webcamElement, 'user', canvasElement, snapSoundElement);
                            
                            webcam.start()
                                .then(result =>{
                                    console.log("webcam started");
                                })
                                .catch(err => {
                                    console.log(err);
                                });
                            let picture = webcam.snap();
                                document.querySelector('#download-photo').href = picture;
                            webcam.stop()
                        }
                    </script>
                    <p></p>
                    <form action="{{ url_for('predict')}}"method="post">
		            <input type="text" name="Value of Check" placeholder="Value of Check" required="required" />

                    <p></p>
                    <button type="submit" class="btn btn-primary btn-block btn-large">Submit Check</button>
                    
                    </form>
                </div>
    </body>
</html>
